# Mindmap Generator Documentation

The files in this directory are used to generate the mindmap image, which is displayed in the 'Mindmap' section of the dahsbaord webapp.
The main file in the directory is `mindmap_generator.py`, which is called from `run_before.py`, after the user has uploaded the set of product links, but before the dashboard is served.
The other two files in this directory (`feature_classifier.py` and `table_string_creator.py`) are called from within `mindmap_generator.py` to help in the generation of some of the intermediate resultrs used to create the image of the mindmap.
The last file in this directory is `__init__.py`. This file does not contain any code; it is simply used to declare this directory as a package, so the `MindmapGenerator` class, which has been defined in `mindmap_generator.py` could be imported into `run_before.py` and called from there.

<hr>

**`mindmap_generator.py`:**

_Dependencies:_
- [`pydot`](https://pypi.org/project/pydot/)
- [`ast`](https://docs.python.org/3/library/ast.html) (Note: `ast` does not need to be installed; it comes preinstalled with `python`)
- [`pandas`](https://pandas.pydata.org/)

This file contains the code that is used to generate the image of the mindmap. This code logically segments information from `attribute_product_mappings.csv` in a way that enables the creation of the mindmap. The actual mindmap image is created with the help of the `pydot` library, which runs atop of `graphviz`.

The mindmap takes the attributes (product features) from `top_twenty_attributes.csv`. Attributes that are not deemed as being very relevant are filtered out (using a set of stopwords). The remaining attributes are mapped against each of the products for which the attribute was deemed as being significant. These products are then further classified into one of 3 categories: 'Good', 'Bad', or 'Neutral', based on the overall customer perception of the product with respect to the attribute (product feature) in question.

While running the code in this file, the code from two other files are also run:
1. `feature_classifier.py`
2. `table_string_creator.py`

Details on what is done in each of these files are given below.

<hr>


**`feature_classifier.py`:**

_Dependencies:_
- [`pandas`](https://pandas.pydata.org/)
- [`nltk`](https://www.nltk.org/)

In order to add an additional layer of taxonomy to the mindmap, the attribtues (product features) from `top_twenty_attributes.csv` are classified into one of 4 archetypal attribute classes:
1. Style
2. Experience
3. Quality
4. Price

A set of base words pertaining to each of these archetypes is defined, and their synonyms are extracted using `nltk`'s `wordnet`. The attributes are then mapped against these synonyms to look for matches, and this forms the basis for classifying the attributes into one of these 4 archetypes.

This set of classified attributes (classified product features) is the main result generated by the code in this file.

<hr>


**`table_string_creator.py`:**

In the mindmap image, each of the attributes (product features) is mapped to a table with 3 columns:
1. Good
2. Bad
3. Neutral

Each of the products for which the attribute in question was deemed as being amongst the top 10 most relevant attributes are classified into one of these 3 categories, and placed into the respective column of the table.

The code in this file generates a string which creates this entire table.